# Snapshot report for `tests/swagger.test.ts`

The actual snapshot is saved in `swagger.test.ts.snap`.

Generated by [AVA](https://avajs.dev).

## GET '/docs/json' returns the specification with legacy API enabled

> Snapshot 1

    {
      components: {
        schemas: {},
      },
      info: {
        description: 'Tourist is an API for artificially visiting vulnerable web applications in CTF challenges',
        title: 'tourist',
        version: '0.1.0',
      },
      openapi: '3.0.3',
      paths: {
        '/': {
          get: {
            responses: {
              200: {
                description: 'Default Response',
              },
            },
          },
        },
        '/api/v1/async-job': {
          post: {
            requestBody: {
              content: {
                'application/json': {
                  schema: {
                    additionalProperties: false,
                    properties: {
                      browser: {
                        anyOf: [
                          {
                            enum: [
                              'CHROMIUM',
                            ],
                            type: 'string',
                          },
                          {
                            enum: [
                              'FIREFOX',
                            ],
                            type: 'string',
                          },
                          {
                            enum: [
                              'WEBKIT',
                            ],
                            type: 'string',
                          },
                        ],
                        default: 'CHROMIUM',
                      },
                      cookies: {
                        default: [],
                        items: {
                          additionalProperties: false,
                          properties: {
                            domain: {
                              type: 'string',
                            },
                            expires: {
                              type: 'number',
                            },
                            httpOnly: {
                              default: false,
                              type: 'boolean',
                            },
                            name: {
                              type: 'string',
                            },
                            path: {
                              default: '/',
                              type: 'string',
                            },
                            secure: {
                              default: false,
                              type: 'boolean',
                            },
                            value: {
                              type: 'string',
                            },
                          },
                          required: [
                            'name',
                            'value',
                            'domain',
                            'path',
                            'httpOnly',
                            'secure',
                          ],
                          type: 'object',
                        },
                        type: 'array',
                      },
                      options: {
                        default: [],
                        items: {
                          anyOf: [
                            {
                              enum: [
                                'RECORD',
                              ],
                              type: 'string',
                            },
                            {
                              enum: [
                                'SCREENSHOT',
                              ],
                              type: 'string',
                            },
                            {
                              enum: [
                                'PDF',
                              ],
                              type: 'string',
                            },
                          ],
                        },
                        type: 'array',
                      },
                      steps: {
                        items: {
                          additionalProperties: false,
                          properties: {
                            actions: {
                              items: {
                                type: 'string',
                              },
                              type: 'array',
                            },
                            url: {
                              type: 'string',
                            },
                          },
                          required: [
                            'url',
                          ],
                          type: 'object',
                        },
                        type: 'array',
                      },
                    },
                    required: [
                      'browser',
                      'steps',
                      'cookies',
                      'options',
                    ],
                    type: 'object',
                  },
                },
              },
              required: true,
            },
            responses: {
              200: {
                content: {
                  'application/json': {
                    schema: {
                      properties: {
                        id: {
                          minimum: 1,
                          type: 'number',
                        },
                        status: {
                          enum: [
                            'scheduled',
                          ],
                          type: 'string',
                        },
                      },
                      required: [
                        'status',
                        'id',
                      ],
                      type: 'object',
                    },
                  },
                },
                description: 'Default Response',
              },
              400: {
                content: {
                  'application/json': {
                    schema: {
                      properties: {
                        error: {
                          type: 'string',
                        },
                        message: {
                          type: 'string',
                        },
                        statusCode: {
                          enum: [
                            400,
                          ],
                          type: 'number',
                        },
                      },
                      required: [
                        'statusCode',
                        'error',
                        'message',
                      ],
                      type: 'object',
                    },
                  },
                },
                description: 'Default Response',
              },
            },
          },
        },
        '/api/v1/healthcheck': {
          get: {
            responses: {
              200: {
                description: 'Default Response',
              },
            },
          },
        },
        '/api/v1/job-status': {
          get: {
            parameters: [
              {
                in: 'query',
                name: 'id',
                required: true,
                schema: {
                  minimum: 1,
                  type: 'number',
                },
              },
            ],
            responses: {
              200: {
                content: {
                  'application/json': {
                    schema: {
                      properties: {
                        result: {
                          properties: {
                            pdf: {
                              type: 'string',
                            },
                            screenshot: {
                              type: 'string',
                            },
                            video: {
                              type: 'string',
                            },
                          },
                          type: 'object',
                        },
                        status: {
                          anyOf: [
                            {
                              enum: [
                                'success',
                              ],
                              type: 'string',
                            },
                            {
                              enum: [
                                'pending',
                              ],
                              type: 'string',
                            },
                            {
                              enum: [
                                'failed',
                              ],
                              type: 'string',
                            },
                          ],
                        },
                      },
                      required: [
                        'status',
                      ],
                      type: 'object',
                    },
                  },
                },
                description: 'Default Response',
              },
              404: {
                content: {
                  'application/json': {
                    schema: {
                      properties: {
                        error: {
                          type: 'string',
                        },
                        statusCode: {
                          enum: [
                            404,
                          ],
                          type: 'number',
                        },
                      },
                      required: [
                        'statusCode',
                        'error',
                      ],
                      type: 'object',
                    },
                  },
                },
                description: 'Default Response',
              },
            },
          },
        },
        '/api/v1/sync-job': {
          post: {
            requestBody: {
              content: {
                'application/json': {
                  schema: {
                    additionalProperties: false,
                    properties: {
                      browser: {
                        anyOf: [
                          {
                            enum: [
                              'CHROMIUM',
                            ],
                            type: 'string',
                          },
                          {
                            enum: [
                              'FIREFOX',
                            ],
                            type: 'string',
                          },
                          {
                            enum: [
                              'WEBKIT',
                            ],
                            type: 'string',
                          },
                        ],
                        default: 'CHROMIUM',
                      },
                      cookies: {
                        default: [],
                        items: {
                          additionalProperties: false,
                          properties: {
                            domain: {
                              type: 'string',
                            },
                            expires: {
                              type: 'number',
                            },
                            httpOnly: {
                              default: false,
                              type: 'boolean',
                            },
                            name: {
                              type: 'string',
                            },
                            path: {
                              default: '/',
                              type: 'string',
                            },
                            secure: {
                              default: false,
                              type: 'boolean',
                            },
                            value: {
                              type: 'string',
                            },
                          },
                          required: [
                            'name',
                            'value',
                            'domain',
                            'path',
                            'httpOnly',
                            'secure',
                          ],
                          type: 'object',
                        },
                        type: 'array',
                      },
                      options: {
                        default: [],
                        items: {
                          anyOf: [
                            {
                              enum: [
                                'RECORD',
                              ],
                              type: 'string',
                            },
                            {
                              enum: [
                                'SCREENSHOT',
                              ],
                              type: 'string',
                            },
                            {
                              enum: [
                                'PDF',
                              ],
                              type: 'string',
                            },
                          ],
                        },
                        type: 'array',
                      },
                      steps: {
                        items: {
                          additionalProperties: false,
                          properties: {
                            actions: {
                              items: {
                                type: 'string',
                              },
                              type: 'array',
                            },
                            url: {
                              type: 'string',
                            },
                          },
                          required: [
                            'url',
                          ],
                          type: 'object',
                        },
                        type: 'array',
                      },
                    },
                    required: [
                      'browser',
                      'steps',
                      'cookies',
                      'options',
                    ],
                    type: 'object',
                  },
                },
              },
              required: true,
            },
            responses: {
              200: {
                content: {
                  'application/json': {
                    schema: {
                      properties: {
                        result: {
                          properties: {
                            pdf: {
                              type: 'string',
                            },
                            screenshot: {
                              type: 'string',
                            },
                            video: {
                              type: 'string',
                            },
                          },
                          type: 'object',
                        },
                        status: {
                          anyOf: [
                            {
                              enum: [
                                'success',
                              ],
                              type: 'string',
                            },
                            {
                              enum: [
                                'failed',
                              ],
                              type: 'string',
                            },
                          ],
                        },
                      },
                      required: [
                        'status',
                      ],
                      type: 'object',
                    },
                  },
                },
                description: 'Default Response',
              },
              400: {
                content: {
                  'application/json': {
                    schema: {
                      properties: {
                        error: {
                          type: 'string',
                        },
                        message: {
                          type: 'string',
                        },
                        statusCode: {
                          enum: [
                            400,
                          ],
                          type: 'number',
                        },
                      },
                      required: [
                        'statusCode',
                        'error',
                        'message',
                      ],
                      type: 'object',
                    },
                  },
                },
                description: 'Default Response',
              },
            },
          },
        },
        '/visit': {
          post: {
            requestBody: {
              content: {
                'application/json': {
                  schema: {
                    additionalProperties: false,
                    properties: {
                      cookies: {
                        default: [],
                        items: {
                          additionalProperties: false,
                          properties: {
                            domain: {
                              type: 'string',
                            },
                            expires: {
                              type: 'number',
                            },
                            httpOnly: {
                              default: false,
                              type: 'boolean',
                            },
                            name: {
                              type: 'string',
                            },
                            path: {
                              default: '/',
                              type: 'string',
                            },
                            secure: {
                              default: false,
                              type: 'boolean',
                            },
                            value: {
                              type: 'string',
                            },
                          },
                          required: [
                            'name',
                            'value',
                            'domain',
                            'path',
                            'httpOnly',
                            'secure',
                          ],
                          type: 'object',
                        },
                        type: 'array',
                      },
                      pdf: {
                        default: false,
                        type: 'boolean',
                      },
                      record: {
                        default: false,
                        type: 'boolean',
                      },
                      screenshot: {
                        default: false,
                        type: 'boolean',
                      },
                      steps: {
                        items: {
                          properties: {
                            actions: {
                              items: {
                                type: 'string',
                              },
                              type: 'array',
                            },
                            url: {
                              type: 'string',
                            },
                          },
                          required: [
                            'url',
                          ],
                          type: 'object',
                        },
                        type: 'array',
                      },
                    },
                    required: [
                      'steps',
                      'cookies',
                      'record',
                      'screenshot',
                      'pdf',
                    ],
                    type: 'object',
                  },
                },
              },
              required: true,
            },
            responses: {
              200: {
                content: {
                  'application/json': {
                    schema: {
                      properties: {
                        result: {
                          properties: {
                            pdf: {
                              type: 'string',
                            },
                            screenshot: {
                              type: 'string',
                            },
                            video: {
                              type: 'string',
                            },
                          },
                          type: 'object',
                        },
                        status: {
                          anyOf: [
                            {
                              enum: [
                                'success',
                              ],
                              type: 'string',
                            },
                            {
                              enum: [
                                'scheduled',
                              ],
                              type: 'string',
                            },
                          ],
                        },
                      },
                      required: [
                        'status',
                      ],
                      type: 'object',
                    },
                  },
                },
                description: 'Default Response',
              },
              400: {
                content: {
                  'application/json': {
                    schema: {
                      properties: {
                        error: {
                          type: 'string',
                        },
                        message: {
                          type: 'string',
                        },
                        statusCode: {
                          enum: [
                            400,
                          ],
                          type: 'number',
                        },
                      },
                      required: [
                        'statusCode',
                        'error',
                        'message',
                      ],
                      type: 'object',
                    },
                  },
                },
                description: 'Default Response',
              },
            },
          },
        },
      },
      servers: [
        {
          url: 'http://localhost:3000',
        },
      ],
    }

## GET '/docs/json' returns the specification with legacy API disabled

> Snapshot 1

    {
      components: {
        schemas: {},
      },
      info: {
        description: 'Tourist is an API for artificially visiting vulnerable web applications in CTF challenges',
        title: 'tourist',
        version: '0.1.0',
      },
      openapi: '3.0.3',
      paths: {
        '/': {
          get: {
            responses: {
              200: {
                description: 'Default Response',
              },
            },
          },
        },
        '/api/v1/async-job': {
          post: {
            requestBody: {
              content: {
                'application/json': {
                  schema: {
                    additionalProperties: false,
                    properties: {
                      browser: {
                        anyOf: [
                          {
                            enum: [
                              'CHROMIUM',
                            ],
                            type: 'string',
                          },
                          {
                            enum: [
                              'FIREFOX',
                            ],
                            type: 'string',
                          },
                          {
                            enum: [
                              'WEBKIT',
                            ],
                            type: 'string',
                          },
                        ],
                        default: 'CHROMIUM',
                      },
                      cookies: {
                        default: [],
                        items: {
                          additionalProperties: false,
                          properties: {
                            domain: {
                              type: 'string',
                            },
                            expires: {
                              type: 'number',
                            },
                            httpOnly: {
                              default: false,
                              type: 'boolean',
                            },
                            name: {
                              type: 'string',
                            },
                            path: {
                              default: '/',
                              type: 'string',
                            },
                            secure: {
                              default: false,
                              type: 'boolean',
                            },
                            value: {
                              type: 'string',
                            },
                          },
                          required: [
                            'name',
                            'value',
                            'domain',
                            'path',
                            'httpOnly',
                            'secure',
                          ],
                          type: 'object',
                        },
                        type: 'array',
                      },
                      options: {
                        default: [],
                        items: {
                          anyOf: [
                            {
                              enum: [
                                'RECORD',
                              ],
                              type: 'string',
                            },
                            {
                              enum: [
                                'SCREENSHOT',
                              ],
                              type: 'string',
                            },
                            {
                              enum: [
                                'PDF',
                              ],
                              type: 'string',
                            },
                          ],
                        },
                        type: 'array',
                      },
                      steps: {
                        items: {
                          additionalProperties: false,
                          properties: {
                            actions: {
                              items: {
                                type: 'string',
                              },
                              type: 'array',
                            },
                            url: {
                              type: 'string',
                            },
                          },
                          required: [
                            'url',
                          ],
                          type: 'object',
                        },
                        type: 'array',
                      },
                    },
                    required: [
                      'browser',
                      'steps',
                      'cookies',
                      'options',
                    ],
                    type: 'object',
                  },
                },
              },
              required: true,
            },
            responses: {
              200: {
                content: {
                  'application/json': {
                    schema: {
                      properties: {
                        id: {
                          minimum: 1,
                          type: 'number',
                        },
                        status: {
                          enum: [
                            'scheduled',
                          ],
                          type: 'string',
                        },
                      },
                      required: [
                        'status',
                        'id',
                      ],
                      type: 'object',
                    },
                  },
                },
                description: 'Default Response',
              },
              400: {
                content: {
                  'application/json': {
                    schema: {
                      properties: {
                        error: {
                          type: 'string',
                        },
                        message: {
                          type: 'string',
                        },
                        statusCode: {
                          enum: [
                            400,
                          ],
                          type: 'number',
                        },
                      },
                      required: [
                        'statusCode',
                        'error',
                        'message',
                      ],
                      type: 'object',
                    },
                  },
                },
                description: 'Default Response',
              },
            },
          },
        },
        '/api/v1/healthcheck': {
          get: {
            responses: {
              200: {
                description: 'Default Response',
              },
            },
          },
        },
        '/api/v1/job-status': {
          get: {
            parameters: [
              {
                in: 'query',
                name: 'id',
                required: true,
                schema: {
                  minimum: 1,
                  type: 'number',
                },
              },
            ],
            responses: {
              200: {
                content: {
                  'application/json': {
                    schema: {
                      properties: {
                        result: {
                          properties: {
                            pdf: {
                              type: 'string',
                            },
                            screenshot: {
                              type: 'string',
                            },
                            video: {
                              type: 'string',
                            },
                          },
                          type: 'object',
                        },
                        status: {
                          anyOf: [
                            {
                              enum: [
                                'success',
                              ],
                              type: 'string',
                            },
                            {
                              enum: [
                                'pending',
                              ],
                              type: 'string',
                            },
                            {
                              enum: [
                                'failed',
                              ],
                              type: 'string',
                            },
                          ],
                        },
                      },
                      required: [
                        'status',
                      ],
                      type: 'object',
                    },
                  },
                },
                description: 'Default Response',
              },
              404: {
                content: {
                  'application/json': {
                    schema: {
                      properties: {
                        error: {
                          type: 'string',
                        },
                        statusCode: {
                          enum: [
                            404,
                          ],
                          type: 'number',
                        },
                      },
                      required: [
                        'statusCode',
                        'error',
                      ],
                      type: 'object',
                    },
                  },
                },
                description: 'Default Response',
              },
            },
          },
        },
        '/api/v1/sync-job': {
          post: {
            requestBody: {
              content: {
                'application/json': {
                  schema: {
                    additionalProperties: false,
                    properties: {
                      browser: {
                        anyOf: [
                          {
                            enum: [
                              'CHROMIUM',
                            ],
                            type: 'string',
                          },
                          {
                            enum: [
                              'FIREFOX',
                            ],
                            type: 'string',
                          },
                          {
                            enum: [
                              'WEBKIT',
                            ],
                            type: 'string',
                          },
                        ],
                        default: 'CHROMIUM',
                      },
                      cookies: {
                        default: [],
                        items: {
                          additionalProperties: false,
                          properties: {
                            domain: {
                              type: 'string',
                            },
                            expires: {
                              type: 'number',
                            },
                            httpOnly: {
                              default: false,
                              type: 'boolean',
                            },
                            name: {
                              type: 'string',
                            },
                            path: {
                              default: '/',
                              type: 'string',
                            },
                            secure: {
                              default: false,
                              type: 'boolean',
                            },
                            value: {
                              type: 'string',
                            },
                          },
                          required: [
                            'name',
                            'value',
                            'domain',
                            'path',
                            'httpOnly',
                            'secure',
                          ],
                          type: 'object',
                        },
                        type: 'array',
                      },
                      options: {
                        default: [],
                        items: {
                          anyOf: [
                            {
                              enum: [
                                'RECORD',
                              ],
                              type: 'string',
                            },
                            {
                              enum: [
                                'SCREENSHOT',
                              ],
                              type: 'string',
                            },
                            {
                              enum: [
                                'PDF',
                              ],
                              type: 'string',
                            },
                          ],
                        },
                        type: 'array',
                      },
                      steps: {
                        items: {
                          additionalProperties: false,
                          properties: {
                            actions: {
                              items: {
                                type: 'string',
                              },
                              type: 'array',
                            },
                            url: {
                              type: 'string',
                            },
                          },
                          required: [
                            'url',
                          ],
                          type: 'object',
                        },
                        type: 'array',
                      },
                    },
                    required: [
                      'browser',
                      'steps',
                      'cookies',
                      'options',
                    ],
                    type: 'object',
                  },
                },
              },
              required: true,
            },
            responses: {
              200: {
                content: {
                  'application/json': {
                    schema: {
                      properties: {
                        result: {
                          properties: {
                            pdf: {
                              type: 'string',
                            },
                            screenshot: {
                              type: 'string',
                            },
                            video: {
                              type: 'string',
                            },
                          },
                          type: 'object',
                        },
                        status: {
                          anyOf: [
                            {
                              enum: [
                                'success',
                              ],
                              type: 'string',
                            },
                            {
                              enum: [
                                'failed',
                              ],
                              type: 'string',
                            },
                          ],
                        },
                      },
                      required: [
                        'status',
                      ],
                      type: 'object',
                    },
                  },
                },
                description: 'Default Response',
              },
              400: {
                content: {
                  'application/json': {
                    schema: {
                      properties: {
                        error: {
                          type: 'string',
                        },
                        message: {
                          type: 'string',
                        },
                        statusCode: {
                          enum: [
                            400,
                          ],
                          type: 'number',
                        },
                      },
                      required: [
                        'statusCode',
                        'error',
                        'message',
                      ],
                      type: 'object',
                    },
                  },
                },
                description: 'Default Response',
              },
            },
          },
        },
      },
      servers: [
        {
          url: 'http://localhost:3000',
        },
      ],
    }
